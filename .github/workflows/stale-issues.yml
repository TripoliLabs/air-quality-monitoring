name: Close Stale Issues

on:
  schedule:
    # Run daily at 00:00 UTC
    - cron: '0 0 * * *'
  workflow_dispatch: # Allow manual triggering

jobs:
  stale:
    runs-on: ubuntu-latest
    permissions:
      issues: write
      pull-requests: write
    steps:
      - uses: actions/stale@v9
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          # Issues
          stale-issue-message: |
            This issue has been inactive for 60 days and will be closed in 7 days if there's no further activity.

            If you're still interested in working on this, please comment to keep it open.
            If this is still relevant, feel free to reopen it or create a new issue.
          close-issue-message: |
            This issue was closed due to inactivity.
            If you're still interested, please reopen or create a new issue with updated context.
          days-before-stale: 60
          days-before-close: 7
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,blocked,help wanted'

          # Pull Requests
          stale-pr-message: |
            This pull request has been inactive for 30 days and will be closed in 7 days if there's no further activity.

            If you plan to continue working on this, please comment or push new commits.
          close-pr-message: |
            This pull request was closed due to inactivity.
            Feel free to reopen when you're ready to continue.
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security,blocked'
